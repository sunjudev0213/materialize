# doc/user

This is the root directory of the Materialize user docs, which are rendered by
the Hugo site in </www> locally or at <https://materialize.io/docs>.

Instructions for previewing the documentation locally are contained in </www>.

## Writing & managing docs

### Railroad diagrams for SQL grammar

Railroad diagrams consist of two parts:

- `bnf` files that describe the grammar you want to convey in a railroad
  diagram.
- `html` files that contain an `svg` generated by
  <https://www.bottlecaps.de/rr/ui>

#### To generate diagrams

1. Modify/create `bnf` files in `/www/layouts/partials/sql-grammar/bnf`.
1. Ensure your diagram looks like you want using
   <https://www.bottlecaps.de/rr/ui>.
2. Go to `/www/util/rr-diagram-gen/`
3. Run `make`.

You can now include the diagram on a page using:

```html
{{&lt; diagram "SOME_DIAGRAM.html" &gt;}}
```

- Replace `&lt;` with `<` and `&gt;` with `>`.
- `SOME_DIAGRAM` will be the name of the `bnf` file, and should be an `html`
  file visible in `/www/layouts/partials/sql-grammar/rr-diagrams`.

**Why is the world like this?**

Because our diagrams rely on Hugo's `partials` features, the diagram files are
maintained in the `/www` dir (the actual Hugo site), but referenced as if they
were local (through the magic of symlinks).

## Function + Operator docs

The **Functions** you see at `www/docs/sql/functions/` are populated from `www/data/sql_funcs.json`. Unfortunately this means that they're ad hoc and are not actually generated from the Materialize source code.

As new functions get added, this file must be manually updated. The idea here is to structure functions by their input type (whereas operators are grouped by their output type), largely influenced by the way that Postgres structures their function docs.

If you see the need to add or change the grouping here, don't be shy.
